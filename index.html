<!DOCTYPE html>
<html lang="es">
<head>
  <!-- ===================== META BASE ===================== -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Librer√≠a Vida ‚Äî Biblias, Libros, Regalos y Cuadros</title>
  <meta name="description" content="Librer√≠a Vida: biblias, libros, regalos cristianos y cuadros. Env√≠os a todo M√©xico y asesor√≠a por WhatsApp." />

  <!-- ===================== SEO / CANONICAL ===================== -->
  <link rel="canonical" href="https://libreriavida.mx/" />

  <!-- ===================== ICONOS / MANIFEST ===================== -->
  <link rel="icon" href="/IMAGENES/favicon.png" type="image/png" sizes="32x32" />
  <link rel="apple-touch-icon" href="/IMAGENES/apple-touch-icon.png" />
  <link rel="manifest" href="/manifest.webmanifest" />
  <meta name="theme-color" content="#1d4ed8" />

  <!-- ===================== PWA / iOS ===================== -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <!-- ===================== SOCIAL (OG / Twitter) ===================== -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Librer√≠a Vida ‚Äî Biblias, Libros, Regalos y Cuadros" />
  <meta property="og:description" content="Biblias, libros, regalos cristianos y cuadros. Env√≠os a todo M√©xico y asesor√≠a por WhatsApp." />
  <meta property="og:image" content="https://libreriavida.mx/IMAGENES/og-cover.jpg" />
  <meta property="og:url" content="https://libreriavida.mx/" />
  <meta name="twitter:card" content="summary_large_image" />

  <!-- ===================== FUENTES ===================== -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet" />

  <!-- ===================== CSS PRINCIPAL ===================== -->
  <link rel="stylesheet" href="css.css" />
  <link rel="stylesheet" href="vida-advisor.css">


  <!-- ===================== PRELOAD LCP (coincide con el slide #1) ===================== -->
  <link rel="preload" as="image"
        href="IMAGENES/ccl.avif"
        imagesrcset="IMAGENES/ccl.avif 1200w, IMAGENES/ccl-800.avif 800w"
        imagesizes="100vw" />

  <!-- ===================== OVERRIDES CR√çTICOS (seguros) ===================== -->
  <style>
    /* Slider m√≠nimo y robusto */
    .hero{position:relative;overflow:hidden;border-radius:18px;margin:10px auto;max-width:1200px;background:#f8fafc;border:1px solid #e5e7eb}
    .slides{display:flex;transition:transform .5s cubic-bezier(.16,1,.3,1);will-change:transform}
    .slide{flex:0 0 100%;min-width:100%}
    .slide img{display:block;width:100%;height:auto;object-fit:cover}
    .slider-btn{position:absolute;top:50%;transform:translateY(-50%);width:42px;height:42px;border:0;border-radius:50%;color:#fff;background:rgba(15,23,42,.45);cursor:pointer}
    .slider-btn.prev{left:8px}.slider-btn.next{right:8px}
    .dots{position:absolute;left:0;right:0;bottom:10px;display:flex;gap:6px;justify-content:center}
    .dots button{width:10px;height:10px;border-radius:999px;border:0;background:#cbd5e1;cursor:pointer}
    .dots button.active{background:#1d4ed8}

    /* Modal n√≠tido (backdrop abajo, di√°logo arriba) */
    .modal{position:fixed;inset:0;display:none;z-index:1000}
    .modal.open{display:block}
    .modal__backdrop{position:absolute;inset:0;background:rgba(0,0,0,.35);backdrop-filter:blur(2px);z-index:1}
    .modal__dialog{position:absolute;inset:8vh 12px auto 12px;left:50%;transform:translateX(-50%);width:min(100%,980px);background:#fff;border:1px solid #e5e7eb;border-radius:16px;padding:12px;box-shadow:0 10px 30px rgba(2,6,23,.08);z-index:2}
    .gallery__nav{z-index:3}

    /* Bot√≥n flotante Asesor */
    .vida-advisor-btn{position:fixed;right:16px;bottom:84px;z-index:50;padding:.7rem 1rem;border:0;border-radius:999px;background:#1d4ed8;color:#fff;font-weight:800;box-shadow:0 10px 20px rgba(0,0,0,.25);cursor:pointer}

    /* Peque√±as mejoras accesibles */
    .btn:focus-visible,.slider-btn:focus-visible,.chip:focus-visible{outline:3px solid rgba(29,78,216,.35);outline-offset:2px}
  </style>

  <noscript><style>.menu-toggle{display:none}.nav{display:flex}.modal{display:none!important}</style></noscript>
</head>

<body>
<header class="header" role="banner">
  <!-- LOGO -->
  <a class="logo" aria-label="Inicio ‚Äî Librer√≠a Vida" href="/">
    <img src="IMAGENES/LOGO-VIDA.png" alt="Librer√≠a Vida" width="46" height="46" />
    <h1>Librer√≠a <span>Vida</span></h1>
  </a>

  <!-- BUSCADOR -->
  <div class="header-search" role="search">
    <label for="searchTop" class="sr-only">Buscar producto</label>
    <div class="group">
      <svg viewBox="0 0 24 24" aria-hidden="true" class="search-icon">
        <path d="M21.53 20.47l-3.66-3.66C19.2 15.24 20 13.21 20 11 20 6.03 15.97 2 11 2S2 6.03 2 11s4.03 9 9 9c2.21 0 4.24-.8 5.81-2.13l3.66 3.66a.75.75 0 001.06-1.06zM3.5 11A7.5 7.5 0 1111 18.5 7.5 7.5 0 013.5 11z"></path>
      </svg>
      <input id="searchTop" type="search" placeholder="Buscar‚Ä¶" autocomplete="off" />
    </div>
  </div>

  <!-- MEN√ö -->
  <button class="menu-toggle" type="button" aria-label="Abrir men√∫" aria-expanded="false" aria-controls="nav">
    <span></span><span></span><span></span>
  </button>

  <!-- CARRITO (mini) -->
  <div class="header-cart" id="headerCart">
    <button class="btn icon" id="cartToggle" type="button" aria-expanded="false" aria-controls="miniCartPanel" title="Carrito">
      üõí <span id="cartCount" class="badge" aria-live="polite" aria-atomic="true">0</span>
    </button>
    <div id="miniCartPanel" class="cart-panel" role="dialog" aria-modal="false" aria-label="Carrito" hidden>
      <ul id="cartItems" class="mini-cart__items"></ul>
      <div class="cart-panel__footer">
        <div class="row">
          <strong>Total: <span id="cartTotal">$0</span></strong>
        </div>
        <div class="row">
          <a id="cartWhats" class="btn primary" target="_blank" rel="noopener">Confirmar por WhatsApp</a>
          <button id="cartClear" class="btn ghost" type="button">Vaciar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- NAV -->
  <nav id="nav" class="nav" role="navigation" aria-label="Navegaci√≥n principal">
    <ul class="nav__list" role="list">
      <li><a href="/" aria-current="page">Inicio</a></li>
      <li><a href="BIBLIAS.html">Biblias</a></li>
      <li><a href="LIBROS.html">Libros</a></li>
      <li><a href="#contacto">Contacto</a></li>
    </ul>
  </nav>
  <div class="nav-backdrop" hidden></div>
</header>

<!-- ===================== HERO / SLIDER ===================== -->
<section id="hero" class="hero" aria-label="Promociones destacadas">
  <div class="slides" id="slides">
    <div class="slide">
      <img src="IMAGENES/ES BUENO CONOCER LA BIBLIA.png" alt="Promoci√≥n del mes" decoding="async" loading="eager" />
    </div>
    <div class="slide">
      <img src="IMAGENES/1.png" alt="Biblias Inspira ‚Äî nuevas ediciones" decoding="async" loading="lazy" />
    </div>
    <div class="slide">
      <img src="IMAGENES/BIBLIA CHEQUERA.png" alt="Biblias para ni√±os con ilustraciones" decoding="async" loading="lazy" />
    </div>
     <div class="slide">
      <img src="IMAGENES/BIBLIA BOLSILLO (1).png" alt="Biblias para ni√±os con ilustraciones" decoding="async" loading="lazy" />
    </div>
  </div>

  <button class="slider-btn prev" type="button" aria-label="Anterior">‚ùÆ</button>
  <button class="slider-btn next" type="button" aria-label="Siguiente">‚ùØ</button>
  <div class="dots" id="dots" aria-label="Indicadores"></div>
</section>

<!-- ===================== FILTROS / CHIPS ===================== -->
<section class="toolbar" aria-label="Filtros de cat√°logo">
  <div class="filters" role="tablist" aria-label="Filtrar por categor√≠a">
    <button class="chip active" type="button" role="tab" aria-selected="true" data-filter="all">Todo</button>
    <button class="chip" type="button" role="tab" aria-selected="false" data-filter="BIBLIAS">Biblias</button>
    <button class="chip" type="button" role="tab" aria-selected="false" data-filter="LIBROS">Libros</button>
    <button class="chip" type="button" role="tab" aria-selected="false" data-filter="CUADROS">Cuadros</button>
  </div>
</section>

<!-- ===================== GRID DE PRODUCTOS ===================== -->
<main id="contenido">
  <section class="grid" id="grid" aria-label="Cat√°logo de productos">
    <!-- Card 1 -->
    <article class="card-product BIBLIAS"
      data-id="BIB-020"
      data-title="Biblia RV60 Chequera"
      data-price="540"
      data-desc="Biblia chequera con zipper; compacta y pr√°ctica."
      data-variant="otras"
      data-version="rv60"
      data-size="bolsillo"
      data-binding="CON ZIPPER"
      data-images="BIBLIAS/BIBLIA-CHEQUERA-1.png|BIBLIAS/BIBLIA-CHEQUERA-2.png"
      data-stock="16"
      data-compareat="675">
      <figure class="card-media">
        <img src="BIBLIAS/BIBLIA-CHEQUERA-1.png" alt="Biblia RV60 Chequera color variado" width="500" height="500" loading="lazy">
        <span class="badge price">$540</span>
        <span class="badge sale" aria-hidden="true">Oferta</span>
      </figure>
      <div class="info">
        <h3>Biblia RV60 Chequera</h3>
        <p class="meta">Compacta con zipper ¬∑ RV60</p>

        <div class="swatches" role="radiogroup" aria-label="Colores">
          <button class="sw" role="radio" aria-checked="false" aria-label="lila-negro" data-color="lila-negro" data-image="biblias/BIBLIA-CHEQUERA-LILA.png"></button>
          <button class="sw" role="radio" aria-checked="false" aria-label="Salmon-Beige-rosa" data-color="Salmon-Beige-rosa" data-image="biblias/BIBLIA-CHEQUERA-ROSA BEIGE-Y.SALMON.png"></button>
          <button class="sw" role="radio" aria-checked="false" aria-label="rosa-beige-rosita" data-color="rosa-beige-rosita" data-image="biblias/BIBLIA-CHEQUERA-ROSA BEIGE.png"></button>
          <button class="sw" role="radio" aria-checked="false" aria-label="rosa-rosita" data-color="rosa-rosita" data-image="biblias/BIBLIA-CHEQUERA-ROSA-Y-ROSA-CLARO.png"></button>
          <button class="sw" role="radio" aria-checked="true" aria-label="rosa-celeste" data-color="rosa-celeste" data-image="biblias/BIBLIA-CHEQUERA-1.png"></button>
          <button class="sw" role="radio" aria-checked="false" aria-label="salmon-beige" data-color="salmon-beige" data-image="biblias/BIBLIA-CHEQUERA-SALMON-BEIJE.png"></button>
        </div>

        <div class="actions">
          <button class="btn outline view" type="button">Ver</button>
          <button class="btn primary add-cart" type="button">Agregar</button>
        </div>
      </div>
    </article>

    <!-- Card 2 (ejemplo) -->
    <article class="card-product BIBLIAS"
      data-id="BIB-001"
      data-title="Biblia RV60 con letra grande, tapa dura"
      data-price="475"
      data-desc="Letra grande y tapa dura resistente."
      data-variant="letra-grande"
      data-version="rv60"
      data-size="manual"
      data-binding="tapa-dura"
      data-images="IMAGENES/ORIGEN/B.ORIGEN.GTC%201.jpg|IMAGENES/ORIGEN/B.ORIGEN.GTC%202.jpg|IMAGENES/ORIGEN/B.ORIGEN.GTC%203.jpg"
      data-stock="2"
      data-compareat="569">
      <figure class="card-media">
        <img src="IMAGENES/ORIGEN/B.ORIGEN.GTC%201.jpg" alt="Biblia RV60 con letra grande, tapa dura, color negro" width="500" height="500" loading="lazy">
        <span class="badge price">$475</span>
      </figure>
      <div class="info">
        <h3>Biblia RV60 con letra grande, tapa dura</h3>
        <p class="meta">Letra grande ¬∑ RV60 ¬∑ Tapa dura</p>
        <div class="swatches" role="radiogroup" aria-label="Colores">
          <button class="sw" role="radio" aria-checked="true" aria-label="Negro" data-color="Negro" data-image="IMAGENES/ORIGEN/B.ORIGEN.GTC%201.jpg"></button>
        </div>
        <div class="actions">
          <button class="btn outline view" type="button">Ver</button>
          <button class="btn primary add-cart" type="button">Agregar</button>
        </div>
      </div>
    </article>

    <!-- Card 3 -->
    <article class="card-product"
      data-id="BIB-017"
      data-title="Biblia rv60"
      data-price="750"
      data-variant="letra grande"
      data-version="rv60"
      data-size="manual"
      data-binding="piel"
      data-images="BIBLIAS/RV60-M.BIBLIA-CAFE-INDICE-1.png|BIBLIAS/RV60-M.BIBLIA-CAFE-INDICE-2.png"
      data-stock="5">
      <figure class="card-media">
        <img src="BIBLIAS/RV60-M.BIBLIA-CAFE-INDICE-1.png" alt="Biblia De Estudio">
        <span class="badge">$750</span>
      </figure>
      <div class="info">
        <h3>Biblia RV60 Cafe Letra grande</h3>
        <p class="meta">Bonita biblia con canto dorado e indice con letra de 12 pts</p>

        <div class="actions">
          <button class="btn outline view" type="button">Ver</button>
          <button class="btn primary add-cart" type="button">Agregar</button>
        </div>
      </div>
    </article>

    <!-- Card 4 -->
     <article class="card-product"
      data-id="BIB-005"
      data-title="Biblia NTV ESTUDIO"
      data-price="950"
      data-variant="otras"
      data-version="NTV"
      data-size="manual"
      data-binding="piel"
      data-images="BIBLIAS/Diario-vivir-rosa-1.png|BIBLIAS/Diario-vivir-rosa-2.png|BIBLIAS/Diario-vivir-rosa-3.png"
      data-stock="8"
      data-compareat="750">
      <figure class="card-media">
        <img src="BIBLIAS/Diario-vivir-rosa-1.png" alt="Biblia NTV manual piel color rosa">
        <span class="badge">$950</span>
      </figure>
      <div class="info">
        <h3>Biblia Diario vivir Jovenes rosa</h3>
        <p class="meta">manual ¬∑ NTV ¬∑ piel</p>

        <div class="actions">
          <button class="btn outline view" type="button">Ver</button>
          <button class="btn primary add-cart" type="button">Agregar</button>
        </div>
      </div>
    </article>
  </section>

  <div id="emptyState" class="empty" hidden>No encontramos resultados con tus filtros y b√∫squeda.</div>
</main>

<!-- ===================== MODAL DE PRODUCTO ===================== -->
<div class="modal" id="productModal" aria-hidden="true">
  <div class="modal__dialog" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <button class="modal__close" type="button" aria-label="Cerrar">√ó</button>
    <div class="modal__body">
      <div class="product-gallery">
        <div class="gallery__stage">
          <button class="gallery__nav left" type="button" aria-label="Anterior">‚ùÆ</button>
          <img id="galleryMain" src="" alt="" />
          <button class="gallery__nav right" type="button" aria-label="Siguiente">‚ùØ</button>
        </div>
        <div class="thumbs" id="galleryThumbs"></div>
      </div>
      <div class="modal__info">
        <h3 id="modalTitle">Producto</h3>
        <p id="modalDesc" class="muted"></p>
        <div class="modal__actions">
          <a id="whatsBuy" class="btn" target="_blank" rel="noopener">Consultar por WhatsApp</a>
        </div>
      </div>
    </div>
  </div>
  <div class="modal__backdrop" aria-hidden="true"></div>
</div>

<!-- ===================== NEWSLETTER ===================== -->
<section id="suscripcion" class="newsletter" aria-label="Suscripci√≥n a promociones">
  <div class="newsletter__card">
    <header>
      <h2>Recibe promociones y lanzamientos</h2>
      <p class="muted">1‚Äì2 correos al mes. Nada de spam.</p>
    </header>
    <form id="nlForm" class="nl-form" novalidate>
      <label class="sr-only" for="nlEmail">Correo</label>
      <input id="nlEmail" type="email" placeholder="tu@correo.com" required />
      <button class="btn primary" type="submit">Suscribirme</button>
    </form>
    <small id="nlMsg" class="nl-msg" aria-live="polite"></small>
  </div>
</section>

<!-- ===================== TEMPLATES (FullScreen & Checkout) ===================== -->
<template id="fsModalTmpl">
  <div class="fs-backdrop" role="presentation">
    <button class="fs-close" aria-label="Cerrar">√ó</button>
    <div class="fs-modal" role="dialog" aria-modal="true" aria-labelledby="fsTitle">
      <div class="fs-left">
        <div class="fs-slider">
          <button class="fs-arrow left" aria-label="Anterior">&#10094;</button>
          <div class="fs-stage"></div>
          <button class="fs-arrow right" aria-label="Siguiente">&#10095;</button>
          <div class="fs-nav" aria-label="Miniaturas"></div>
        </div>
      </div>
      <div class="fs-right">
        <div id="fsTitle" class="fs-title"></div>
        <div class="fs-price"><div class="now"></div><div class="before" style="display:none"></div></div>
        <div class="prod-meta">
          <div class="promo" id="modalPromo" hidden>
            <span class="badge-oferta">OFERTA</span>
            <span class="promo-text"></span>
          </div>
          <div class="stock" id="modalStock" aria-live="polite">
            <span class="stock-dot" aria-hidden="true"></span>
            <span class="stock-text">En stock</span>
          </div>
        </div>
        <div class="fs-swatches" id="fsSwatches" aria-label="Variantes de color"></div>
        <div class="fs-meta"></div>
        <div class="fs-actions">
          <button class="btn-xl btn-ghost" id="fsAdd">Agregar al carrito</button>
          <button class="btn-xl btn-primary" id="fsBuy">Comprar ahora</button>
        </div>
      </div>
    </div>
  </div>
</template>

<template id="coModalTmpl">
  <div class="co-backdrop" role="presentation">
    <div class="co-modal" role="dialog" aria-modal="true" aria-labelledby="coTitle">
      <div class="co-flag" aria-hidden="true"></div>
      <div class="co-hdr">
        <div id="coTitle" class="co-title">Datos para env√≠o y contacto</div>
        <button class="co-close" aria-label="Cerrar">√ó</button>
      </div>
      <div class="co-body">
        <div class="co-col">
          <h4>Informaci√≥n del cliente</h4>
          <div class="co-grid">
            <div class="co-field full">
              <label class="co-label" for="coName">Nombre completo *</label>
              <input class="co-input" id="coName" autocomplete="name" placeholder="Ej. Ana L√≥pez" required>
              <div class="co-err">Ingresa tu nombre.</div>
            </div>
            <div class="co-field">
              <label class="co-label" for="coPhone">Tel√©fono *</label>
              <input class="co-input" id="coPhone" type="tel" inputmode="tel" autocomplete="tel" placeholder="10 d√≠gitos" required>
              <div class="co-err">Tel√©fono inv√°lido.</div>
            </div>
            <div class="co-field">
              <label class="co-label" for="coEmail">Correo *</label>
              <input class="co-input" id="coEmail" type="email" autocomplete="email" placeholder="tucorreo@dominio.com" required>
              <div class="co-err">Correo inv√°lido.</div>
            </div>
            <div class="co-field full">
              <label class="co-label" for="coStreet">Calle y n√∫mero *</label>
              <input class="co-input" id="coStreet" autocomplete="address-line1" placeholder="Calle, n√∫mero" required>
              <div class="co-err">Requerido.</div>
            </div>
            <div class="co-field">
              <label class="co-label" for="coCol">Colonia *</label>
              <input class="co-input" id="coCol" autocomplete="address-line2" placeholder="Colonia" required>
              <div class="co-err">Requerido.</div>
            </div>
            <div class="co-field">
              <label class="co-label" for="coCP">C.P. *</label>
              <input class="co-input" id="coCP" inputmode="numeric" pattern="\d{5}" placeholder="5 d√≠gitos" required>
              <div class="co-err">C.P. inv√°lido.</div>
            </div>
            <div class="co-field">
              <label class="co-label" for="coCity">Ciudad *</label>
              <input class="co-input" id="coCity" autocomplete="address-level2" placeholder="Ciudad" required>
              <div class="co-err">Requerido.</div>
            </div>
            <div class="co-field">
              <label class="co-label" for="coState">Estado *</label>
              <input class="co-input" id="coState" autocomplete="address-level1" placeholder="Estado" required>
              <div class="co-err">Requerido.</div>
            </div>
            <div class="co-field full">
              <label class="co-label" for="coNotes">Notas (opcional)</label>
              <textarea class="co-textarea" id="coNotes" placeholder="Referencias para entrega, horario, entre calles‚Ä¶"></textarea>
            </div>
          </div>
          <label class="co-terms">
            <input id="coTerms" type="checkbox">
            <span>
              Acepto los <a href="#" target="_blank" rel="noopener">T√©rminos y Condiciones</a> y el
              <a href="#" target="_blank" rel="noopener">Aviso de Privacidad</a>.
            </span>
          </label>
        </div>
        <div class="co-col">
          <h4>Resumen del pedido</h4>
          <div class="co-summary" id="coSummary"></div>
          <div class="co-item" id="coShipRow" hidden>
            <span>Env√≠o</span><span id="coShipVal"></span>
          </div>
          <div class="co-total"><span>Total</span><strong id="coTotal"></strong></div>
        </div>
      </div>
      <div class="co-ftr">
        <button class="co-btn ghost" id="coCancel" type="button">Cancelar</button>
        <button class="co-btn primary" id="coSubmit" type="button">Confirmar y continuar a WhatsApp</button>
      </div>
    </div>
  </div>
</template>

<!-- ===================== FOOTER ===================== -->
<footer class="footer" role="contentinfo" id="contacto">
  <p>¬øDudas? Escr√≠benos: <a class="accent" href="https://wa.me/528441331841" target="_blank" rel="noopener">+52 844 328 852 1</a></p>
  <small>&copy; <span id="year">2025</span> Librer√≠a Vida ‚Äî Todos los derechos reservados.</small>
</footer>

<!-- ===================== PAPEL PICADO (opcional) ===================== -->
<svg xmlns="http://www.w3.org/2000/svg" style="display:none">
  <symbol id="ppVida" viewBox="0 0 260 180">
    <defs>
      <mask id="ppVidaCut">
        <rect x="0" y="0" width="260" height="180" fill="#fff"/>
        <circle cx="43"  cy="176" r="40" fill="#000"/>
        <circle cx="130" cy="176" r="40" fill="#000"/>
        <circle cx="217" cy="176" r="40" fill="#000"/>
      </mask>
    </defs>
    <rect x="6" y="10" width="248" height="150" rx="14" ry="14" fill="var(--fg,#1d4ed8)" mask="url(#ppVidaCut)"/>
    <path d="M0,10 H260" stroke="#e5e7eb" stroke-width="1" opacity=".7"/>
  </symbol>
</svg>

<!-- ===================== JSON-LD (BookStore + WebSite) ===================== -->
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@graph":[
    {
      "@type":"BookStore",
      "name":"Librer√≠a Vida",
      "url":"https://libreriavida.mx/",
      "image":"https://libreriavida.mx/IMAGENES/LOGO-VIDA.png",
      "telephone":"+528443288521",
      "address":{"@type":"PostalAddress","addressCountry":"MX"}
    },
    {
      "@type":"WebSite",
      "name":"Librer√≠a Vida",
      "url":"https://libreriavida.mx/",
      "potentialAction":{
        "@type":"SearchAction",
        "target":"https://libreriavida.mx/?q={search_term_string}",
        "query-input":"required name=search_term_string"
      }
    }
  ]
}
</script>

<!-- ============ ASESOR VIDA (PRO) ============ -->
<!-- Bot√≥n flotante (puedes moverlo donde quieras) -->
<button id="vida-advisor-btn" class="va-btn" aria-haspopup="dialog" aria-controls="vida-advisor-modal" aria-label="Abrir asesor">
  üß† Asesor Vida
</button>

<!-- Modal -->
<div id="vida-advisor-modal" class="va-modal" aria-hidden="true" role="dialog" aria-labelledby="va-title">
  <div class="va-backdrop" data-va-close></div>

  <div class="va-dialog" role="document">
    <header class="va-head">
      <h3 id="va-title">Encuentra tu producto ideal</h3>
      <button class="va-x" type="button" aria-label="Cerrar" data-va-close>√ó</button>
    </header>

    <form id="vida-quiz" class="va-form">
      <!-- Tipo -->
      <div class="va-field">
        <label class="va-label">¬øQu√© buscas? <span class="va-req">*</span></label>
        <select name="tipo" required aria-required="true">
          <option value="">Selecciona‚Ä¶</option>
          <option value="biblia">Biblia</option>
          <option value="libro">Libro</option>
          <option value="regalo">Regalo</option>
        </select>
      </div>

      <!-- ==== Secci√≥n Biblias ==== -->
      <fieldset class="va-section" data-section="biblia" hidden>
        <legend class="va-legend">Preferencias para Biblia</legend>

        <div class="va-grid">
          <div class="va-field">
            <label class="va-label">¬øPara qu√© la quieres?</label>
            <select name="proposito">
              <option value="">‚Äî</option>
              <option value="lectura">Lectura diaria</option>
              <option value="estudio">Estudio profundo</option>
              <option value="regalo">Regalo</option>
              <option value="iglesia">Uso en iglesia</option>
            </select>
          </div>

          <div class="va-field">
            <label class="va-label">Traducci√≥n preferida</label>
            <select name="traduccion">
              <option value="">Cualquiera</option>
              <option value="RVR1960">RVR1960</option>
              <option value="NTV">NTV</option>
              <option value="NVI">NVI</option>
              <option value="TLA">TLA</option>
            </select>
          </div>

          <div class="va-field">
            <label class="va-label">Tama√±o</label>
            <select name="tamano">
              <option value="">Me da igual</option>
              <option value="compacta">Compacta / Port√°til</option>
              <option value="mediana">Mediana</option>
              <option value="grande">Grande</option>
            </select>
          </div>

          <div class="va-field">
            <label class="va-label">Letra</label>
            <select name="letra">
              <option value="">Normal</option>
              <option value="grande">Grande</option>
              <option value="gigante">Gigante</option>
            </select>
          </div>

          <div class="va-field">
            <label class="va-label">Presupuesto (MXN)</label>
            <select name="precioBiblia">
              <option value="">Cualquiera</option>
              <option value="economica">Hasta 400</option>
              <option value="media">401‚Äì900</option>
              <option value="premium">901+</option>
            </select>
          </div>

          <div class="va-field">
            <label class="va-label">¬øQu√© valoras m√°s?</label>
            <select name="plus">
              <option value="">‚Äî</option>
              <option value="bonita">Dise√±o bonito / regalo</option>
              <option value="estudio">Notas de estudio / mapas</option>
              <option value="durable">Tapa resistente / uso rudo</option>
              <option value="ligera">Que sea ligera</option>
            </select>
          </div>

        </div>
      </fieldset>

      <!-- ==== Secci√≥n Libros ==== -->
      <fieldset class="va-section" data-section="libro" hidden>
        <legend class="va-legend">Preferencias para Libro</legend>

        <div class="va-grid">
          <div class="va-field">
            <label class="va-label">G√©nero</label>
            <select name="genero">
              <option value="">‚Äî</option>
              <option value="novela">Novela cristiana</option>
              <option value="devocional">Devocional</option>
              <option value="estudio">Estudio b√≠blico</option>
              <option value="biografia">Biograf√≠a/Testimonio</option>
              <option value="apologetica">Apolog√©tica</option>
            </select>
          </div>

          <div class="va-field">
            <label class="va-label">Autor</label>
            <input type="text" name="autor" placeholder="Ej. Francine Rivers" inputmode="text" />
          </div>

          <div class="va-field">
            <label class="va-label">Presupuesto (MXN)</label>
            <select name="precioLibro">
              <option value="">Cualquiera</option>
              <option value="economico">Hasta 300</option>
              <option value="medio">301‚Äì700</option>
              <option value="premium">701+</option>
            </select>
          </div>
        </div>
      </fieldset>

      <!-- ==== Secci√≥n Regalos ==== -->
      <fieldset class="va-section" data-section="regalo" hidden>
        <legend class="va-legend">Preferencias para Regalo</legend>

        <div class="va-grid">
          <div class="va-field">
            <label class="va-label">¬øPara qui√©n?</label>
            <select name="destinatario">
              <option value="">‚Äî</option>
              <option value="mujer">Mujer</option>
              <option value="hombre">Hombre</option>
              <option value="nino">Ni√±o</option>
              <option value="joven">Joven</option>
              <option value="pastor">Pastor/L√≠der</option>
            </select>
          </div>

          <div class="va-field">
            <label class="va-label">Ocasi√≥n</label>
            <select name="ocasion">
              <option value="">‚Äî</option>
              <option value="cumple">Cumplea√±os</option>
              <option value="aniversario">Aniversario</option>
              <option value="navidad">Navidad</option>
              <option value="consolacion">Consuelo/√Ånimo</option>
              <option value="agradecimiento">Agradecimiento</option>
            </select>
          </div>

          <div class="va-field">
            <label class="va-label">Presupuesto (MXN)</label>
            <select name="precioRegalo">
              <option value="">Cualquiera</option>
              <option value="economico">Hasta 300</option>
              <option value="medio">301‚Äì700</option>
              <option value="premium">701+</option>
            </select>
          </div>
        </div>
      </fieldset>

      <footer class="va-actions">
        <button type="button" class="va-btn-ghost" id="va-reset">Limpiar</button>
        <button type="submit" class="va-btn-primary">Ver recomendaciones</button>
      </footer>
    </form>

    <section id="vida-results" class="va-results" hidden aria-live="polite">
      <div class="va-results-head">
        <h4>Recomendaciones</h4>
        <div class="va-tip" id="va-tip"></div>
      </div>
      <ol id="vida-list" class="va-list"></ol>
    </section>
  </div>
</div>

<style>
/* ===== Scoped UI del Asesor (no pisa tu CSS) ===== */
:root{
  --va-ink:#0f172a; --va-soft:#475569; --va-border:#e5e7eb;
  --va-main:#1d4ed8; --va-main2:#1e3a8a; --va-warn:#f59e0b; --va-bg:#fff;
  --va-shadow:0 18px 60px rgba(2,6,23,.18);
  --va-radius:14px; --va-ease:cubic-bezier(.2,.8,.2,1);
}

/* Bot√≥n flotante */
.va-btn{
  position:fixed; right:16px; bottom:18px; z-index:60;
  border:0; border-radius:999px; padding:.8rem 1rem;
  background:linear-gradient(180deg,var(--va-main),var(--va-main2)); color:#fff; font-weight:900;
  box-shadow:0 10px 24px rgba(2,6,23,.25);
}
.va-btn:focus-visible{ outline:3px solid rgba(29,78,216,.35); outline-offset:3px; }

/* Modal */
.va-modal[aria-hidden="true"]{ display:none; }
.va-modal{
  position:fixed; inset:0; z-index:9999; display:grid; place-items:center;
}
.va-backdrop{
  position:absolute; inset:0; background:rgba(0,0,0,.45); backdrop-filter:blur(2px);
}
.va-dialog{
  position:relative; z-index:1; width:min(100%, 980px); max-height:90vh; overflow:auto;
  background:var(--va-bg); color:var(--va-ink); border:1px solid var(--va-border);
  border-radius:var(--va-radius); box-shadow:var(--va-shadow); padding:14px;
}

/* Header */
.va-head{ display:flex; align-items:center; justify-content:space-between; gap:8px; padding-bottom:6px; border-bottom:1px solid var(--va-border); }
.va-head h3{ margin:0; font-size:1.2rem; }
.va-x{
  width:40px; height:40px; border-radius:999px; border:1px solid var(--va-border); background:#fff;
  font-size:22px; cursor:pointer;
}

/* Form */
.va-form{ display:grid; gap:12px; padding-block:8px; }
.va-grid{ display:grid; gap:10px; grid-template-columns: repeat(2,minmax(0,1fr)); }
@media (max-width:720px){ .va-grid{ grid-template-columns:1fr; } }

.va-label{ font-weight:800; color:#0b1f3b; }
.va-req{ color:#ef4444; }
.va-field select, .va-field input{
  width:100%; padding:.65rem .75rem; border-radius:10px; border:1px solid var(--va-border);
}
.va-legend{ font-weight:800; color:#102a56; padding:.3rem 0; }

/* Actions */
.va-actions{ display:flex; justify-content:flex-end; gap:8px; border-top:1px solid var(--va-border); padding-top:10px; }
.va-btn-ghost{
  border:1px solid var(--va-border); background:#fff; color:#334155; border-radius:10px; padding:.6rem .9rem; font-weight:800;
}
.va-btn-primary{
  border:0; border-radius:10px; padding:.7rem 1rem; font-weight:900; color:#fff;
  background:linear-gradient(180deg,var(--va-main),var(--va-main2));
  box-shadow:0 10px 24px rgba(13,40,110,.22);
}

/* Results */
.va-results{ margin-top:8px; }
.va-results-head{ display:flex; align-items:center; justify-content:space-between; gap:8px; }
.va-results h4{ margin:.2rem 0 .6rem; }
.va-tip{ color:var(--va-soft); font-size:.92rem; }

.va-list{ list-style: none; padding:0; margin:0; display:grid; gap:10px; }
.va-card{
  display:grid; grid-template-columns: 90px 1fr auto; gap:10px; align-items:center;
  border:1px solid var(--va-border); border-radius:12px; padding:10px; background:#fff;
  box-shadow:0 10px 24px rgba(0,0,0,.06);
}
@media (max-width:640px){
  .va-card{ grid-template-columns: 70px 1fr; }
  .va-card .va-cta{ grid-column: 1 / -1; justify-content:flex-end; }
}

.va-thumb{ width:90px; height:90px; object-fit:cover; border-radius:10px; background:#f8fafc; border:1px solid var(--va-border); }
.va-title{ font-weight:900; margin:0; }
.va-meta{ color:var(--va-soft); font-size:.92rem; margin:.15rem 0 .4rem; }
.va-tags{ display:flex; gap:6px; flex-wrap:wrap; }
.va-tag{ font-size:.75rem; padding:.15rem .45rem; border-radius:999px; background:#eef2ff; color:#1e3a8a; border:1px solid #dbeafe; }
.va-price{ font-weight:900; }
.va-score{ font-weight:900; color:#065f46; background:#ecfdf5; border:1px solid #a7f3d0; border-radius:999px; padding:.15rem .45rem; font-size:.75rem; }

.va-cta{ display:flex; gap:8px; align-items:center; }
.va-cta .va-link{ border:1px dashed var(--va-border); border-radius:10px; padding:.5rem .8rem; font-weight:800; background:#fff; }
.va-cta .va-buy{ border:0; border-radius:10px; padding:.6rem .9rem; font-weight:900; color:#fff; background:linear-gradient(180deg,#16a34a,#15803d); }
</style>

<script>
(()=>{

/* ============ Helpers de UI ============ */
const $ = (sel,root=document)=>root.querySelector(sel);
const $$ = (sel,root=document)=>Array.from(root.querySelectorAll(sel));

const modal     = $('#vida-advisor-modal');
const btnOpen   = $('#vida-advisor-btn');
const form      = $('#vida-quiz');
const results   = $('#vida-results');
const list      = $('#vida-list');
const tip       = $('#va-tip');

let CATALOG = null;     // cache de index.json
let LAST    = {};       // respuestas previas

/* ============ Apertura / Cierre ============ */
function openModal(){
  modal.setAttribute('aria-hidden','false');
  document.body.style.overflow = 'hidden';
  // restaurar √∫ltimas respuestas
  try{
    const saved = JSON.parse(localStorage.getItem('va:last')||'{}');
    if(Object.keys(saved).length){ fillForm(saved); }
  }catch{}
  form.tipo.dispatchEvent(new Event('change',{bubbles:true}));
  // foco
  setTimeout(()=>{ form.tipo.focus(); }, 60);
}
function closeModal(){
  modal.setAttribute('aria-hidden','true');
  document.body.style.overflow = '';
}
modal.addEventListener('click', e=>{
  if(e.target.hasAttribute('data-va-close')) closeModal();
});
document.addEventListener('keydown', e=>{
  if(modal.getAttribute('aria-hidden')==='false' && e.key==='Escape') closeModal();
});
btnOpen?.addEventListener('click', openModal);
$$('[data-va-close]', modal).forEach(b=>b.addEventListener('click', closeModal));

/* ============ Mostrar/Ocultar secciones por tipo ============ */
form.addEventListener('change', e=>{
  if(e.target.name === 'tipo'){
    const tipo = form.tipo.value;
    $$('[data-section]').forEach(sec=>{
      sec.hidden = (sec.dataset.section !== tipo);
    });
  }
});

/* ============ Reset ============ */
$('#va-reset').addEventListener('click', ()=>{
  form.reset();
  localStorage.removeItem('va:last');
  $$('[data-section]').forEach(sec=>sec.hidden = true);
  results.hidden = true;
  list.innerHTML = '';
});

/* ============ Submit ============ */
form.addEventListener('submit', async (e)=>{
  e.preventDefault();
  const data = Object.fromEntries(new FormData(form).entries());
  LAST = data;
  localStorage.setItem('va:last', JSON.stringify(data));

  // carga cat√°logo
  if(!CATALOG){
    try{
      CATALOG = await fetch('/index.json',{cache:'no-store'}).then(r=>r.json());
    }catch(err){
      console.error('No se pudo cargar index.json', err);
      list.innerHTML = '<li>‚ö†Ô∏è No se pudo cargar el cat√°logo. Revisa /index.json</li>';
      results.hidden = false;
      return;
    }
  }

  // ranking
  const ranked = rankProducts(CATALOG, data).slice(0,10);
  renderResults(ranked, data);
});

/* ============ Ranking (motor h√≠brido reglas + texto) ============ */
function norm(v){ return (v??'').toString().toLowerCase(); }

function buckPrice(mx){
  if(mx==null || isNaN(mx)) return '';
  if(mx<=300) return 'economico';
  if(mx<=700) return 'medio';
  return 'premium';
}

function rankProducts(items, q){
  const tipo = q.tipo;

  // Palabras claves derivadas
  const keywords = new Set();
  function add(...arr){ arr.filter(Boolean).forEach(s=>keywords.add(norm(s))); }

  if(tipo==='biblia'){
    add(q.proposito, q.traduccion, q.tamano, q.letra, q.plus);
    add(q.precioBiblia);
  }
  if(tipo==='libro'){
    add(q.genero, q.autor);
    add(q.precioLibro);
  }
  if(tipo==='regalo'){
    add(q.destinatario, q.ocasion);
    add(q.precioRegalo);
  }

  // pesos por match (afinados a comercio)
  const W = {
    category: 6,
    version:  5,
    tags:     3.5,
    author:   4,
    text:     2.5,
    price:    2.5,
    bonus:    2,   // prop√≥sito/plus especiales
  };

  const desiredPrice = (
    tipo==='biblia' ? q.precioBiblia :
    tipo==='libro'  ? q.precioLibro  : q.precioRegalo
  ) || '';

  const desiredVersion = norm(q.traduccion||'');
  const desiredAuthor  = norm(q.autor||'');
  const desiredGenero  = norm(q.genero||'');

  // mapeos prop√≥sito/plus -> tags
  const purposeTags = {
    lectura:['compacta','ligera','portatil'],
    estudio:['estudio','comentarios','mapas','referencias'],
    regalo:['bonita','edicion-especial','presentacion'],
    iglesia:['pulpito','letra-grande','revestimiento']
  };
  const plusTags = {
    bonita:['bonita','edicion-especial','premium'],
    estudio:['estudio','comentarios','mapas'],
    durable:['tapa-dura','zipper','resistente'],
    ligera:['ligera','compacta','bolsillo']
  };

  return items
    .map(p=>{
      const title = norm(p.title);
      const text  = norm(`${p.title} ${p.description||''} ${(p.tags||[]).join(' ')} ${p.author||''} ${p.version||''} ${p.category||''}`);
      const priceBucket = buckPrice(p.price);

      let score = 0;
      const reasons = [];

      // 1) categor√≠a
      if(tipo==='biblia' && norm(p.category)==='biblias'){ score+=W.category; reasons.push('categor√≠a: biblias'); }
      if(tipo==='libro'  && norm(p.category)==='libros'){  score+=W.category; reasons.push('categor√≠a: libros'); }
      if(tipo==='regalo' && norm(p.category)==='regalos'){ score+=W.category; reasons.push('categor√≠a: regalos'); }

      // 2) versi√≥n/traducci√≥n
      if(tipo==='biblia' && desiredVersion && norm(p.version)===desiredVersion){
        score+=W.version; reasons.push(`traducci√≥n: ${p.version}`);
      }

      // 3) autor/g√©nero (libros)
      if(tipo==='libro'){
        if(desiredAuthor && norm(p.author||'').includes(desiredAuthor)){ score+=W.author+2; reasons.push(`autor: ${p.author}`); }
        if(desiredGenero && (p.tags||[]).some(t=>norm(t).includes(desiredGenero))){ score+=W.tags; reasons.push(`g√©nero: ${desiredGenero}`); }
      }

      // 4) precio
      if(desiredPrice && desiredPrice===priceBucket){
        score+=W.price; reasons.push(`presupuesto: ${desiredPrice}`);
      }

      // 5) prop√≥sito/plus -> tags
      if(tipo==='biblia'){
        const pt = (purposeTags[q.proposito]||[]);
        const pl = (plusTags[q.plus]||[]);
        const want = new Set([...pt,...pl].map(norm));
        if(want.size){
          const hits = (p.tags||[]).map(norm).filter(t=>want.has(t)).length;
          if(hits){ score += W.bonus + (hits*1.2); reasons.push('caracter√≠sticas preferidas'); }
        }
        // letra y tama√±o como tags frecuentes
        if(q.letra && (p.tags||[]).map(norm).includes(norm(q.letra))){ score+=2; reasons.push(`letra ${q.letra}`); }
        if(q.tamano && (p.tags||[]).map(norm).includes(norm(q.tamano))){ score+=2; reasons.push(`tama√±o ${q.tamano}`); }
      }

      // 6) coincidencias de texto difuso con keywords
      let textHits = 0;
      keywords.forEach(k=>{
        if(k && text.includes(k)) textHits++;
      });
      if(textHits){ score += W.text + Math.min(textHits,3)*0.8; reasons.push('coincidencias de b√∫squeda'); }

      // bonus leve si es oferta/precio tachado (si existiera)
      if(p.compareAt && p.compareAt>p.price){ score+=1; reasons.push('en oferta'); }

      // normaliza score a 0‚Äì100 aprox
      const normScore = Math.max(0, Math.min(100, Math.round(score*6)));

      return { product:p, score:normScore, reasons };
    })
    .filter(x=>x.score>0) // oculta irrelevantes
    .sort((a,b)=> b.score - a.score);
}

/* ============ Render ============ */
function renderResults(items, q){
  results.hidden = false;
  if(!items.length){
    tip.textContent = 'No encontr√© coincidencias exactas. Prueba con menos filtros.';
    list.innerHTML = '<li class="va-meta">Sin resultados. Ajusta las preferencias o escribe un autor distinto.</li>';
    return;
  }

  tip.textContent = `Mostrando ${Math.min(items.length,10)} resultado(s) ‚Äî ordenado por relevancia`;

  list.innerHTML = items.map(({product,score})=>{
    const img = product.image || '/IMAGENES/placeholder.png';
    const url = product.url   || '#';
    const price = (product.price!=null) ? `$${Number(product.price).toLocaleString('es-MX')}` : '‚Äî';
    const tags = (product.tags||[]).slice(0,5).map(t=>`<span class="va-tag">${t}</span>`).join(' ');
    const version = product.version ? ` ¬∑ ${product.version}`:'';
    const author  = product.author ? ` ¬∑ ${product.author}`:'';

    // link de WhatsApp con prefill
    const wa = new URL('https://wa.me/528443288521');
    const msg = `Hola, me interesa ${product.title} (ID: ${product.id||'-'}). ¬øDisponible?`;
    wa.searchParams.set('text', msg);

    return `
      <li class="va-card">
        <img class="va-thumb" src="${img}" alt="${product.title}">
        <div>
          <h5 class="va-title">${product.title}</h5>
          <div class="va-meta">${norm(product.category)}${version}${author}</div>
          <div class="va-tags">${tags}</div>
        </div>
        <div class="va-cta">
          <div>
            <div class="va-price">${price}</div>
            <div class="va-score" title="Relevancia">Match ${score}%</div>
          </div>
          <a class="va-link" href="${url}">Ver</a>
          <a class="va-buy" href="${wa.toString()}" target="_blank" rel="noopener">WhatsApp</a>
        </div>
      </li>
    `;
  }).join('');
}

/* ============ Rellenar form desde localStorage ============ */
function fillForm(obj){
  Object.entries(obj).forEach(([k,v])=>{
    const el = form.elements[k];
    if(!el) return;
    if(el.tagName==='SELECT' || el.tagName==='INPUT' || el.tagName==='TEXTAREA'){
      el.value = v;
    }
  });
}

/* ============ Mejora: abrir asesor con query pre-cargada (opcional) ============
   Si llamas openAdvisor({tipo:'libro', autor:'Francine Rivers'})
   desde cualquier parte de tu sitio. */
window.openAdvisor = (pref={})=>{
  openModal();
  setTimeout(()=>{
    Object.entries(pref).forEach(([k,v])=>{
      if(form.elements[k]) form.elements[k].value = v;
    });
    form.tipo.dispatchEvent(new Event('change',{bubbles:true}));
  },0);
};

})();
</script>


<!-- ===================== SDK MERCADO PAGO (opcional) ===================== -->
<script src="https://sdk.mercadopago.com/js/v2" defer></script>

<!-- ===================== JS PROPIO ===================== -->
<script src="java.js" defer></script>
<!-- Si a√∫n no subes el asesor IA, deja comentado: -->
<script src="vida-advisor.js" defer></script>

<!-- ===================== JS EMBEBIDO: slider + men√∫ + asesor ===================== -->
<script>
/* ===== Men√∫ m√≥vil simple ===== */
(function(){
  const btn = document.querySelector('.menu-toggle');
  const nav = document.getElementById('nav');
  const backdrop = document.querySelector('.nav-backdrop');
  if(!btn || !nav || !backdrop) return;
  function close(){ nav.classList.remove('open'); backdrop.hidden = true; btn.setAttribute('aria-expanded','false'); }
  btn.addEventListener('click', () => {
    const open = nav.classList.toggle('open');
    backdrop.hidden = !open;
    btn.setAttribute('aria-expanded', String(open));
  });
  backdrop.addEventListener('click', close);
  window.addEventListener('resize', () => { if (window.innerWidth > 860) close(); });
})();

/* ===== Slider hero robusto ===== */
(function(){
  const wrap = document.getElementById('slides');
  if(!wrap) return;
  const prev = document.querySelector('.slider-btn.prev');
  const next = document.querySelector('.slider-btn.next');
  const dotsWrap = document.getElementById('dots');
  const slides = Array.from(wrap.children).filter(el => el.classList.contains('slide'));
  let i = 0;

  if (dotsWrap) dotsWrap.innerHTML = slides.map((_, idx) =>
    `<button type="button" aria-label="Ir al slide ${idx+1}"></button>`
  ).join('');
  const dots = dotsWrap ? Array.from(dotsWrap.querySelectorAll('button')) : [];

  function go(idx){
    i = (idx + slides.length) % slides.length;
    wrap.style.transform = `translateX(-${i*100}%)`;
    dots.forEach((d, n) => d.classList.toggle('active', n === i));
  }
  prev && prev.addEventListener('click', () => go(i-1));
  next && next.addEventListener('click', () => go(i+1));
  dots.forEach((d, n) => d.addEventListener('click', () => go(n)));

  let timer = setInterval(() => { if(!document.hidden) go(i+1); }, 6000);
  document.addEventListener('visibilitychange', () => {
    clearInterval(timer);
    timer = setInterval(() => { if(!document.hidden) go(i+1); }, 6000);
  });
  go(0);
})();

/* ===== Asesor IA (UI b√°sica) ===== */
(function(){
  const btn = document.getElementById('vida-advisor-btn');
  const modal = document.getElementById('vida-advisor-modal');
  const close = modal?.querySelector('.vam-close');
  const form = document.getElementById('vida-quiz');
  const list = document.getElementById('vida-list');
  const results = document.getElementById('vida-results');
  if(!btn || !modal || !close || !form || !list || !results) return;

  const open = () => { modal.classList.add('open'); modal.setAttribute('aria-hidden','false'); }
  const hide = () => { modal.classList.remove('open'); modal.setAttribute('aria-hidden','true'); }

  btn.addEventListener('click', open);
  close.addEventListener('click', hide);
  modal.querySelector('.vam-backdrop').addEventListener('click', hide);
  document.addEventListener('keydown', e => { if(e.key === 'Escape') hide(); });

  form.addEventListener('submit', (e) => {
    e.preventDefault();
    const data = Object.fromEntries(new FormData(form));
    // Reglas sencillas (puedes mejorarlas en vida-advisor.js con IA real)
    const picks = [];
    if (data.proposito === 'estudio') picks.push('Biblia de Estudio (RVR1960/NVI) con mapas y notas.');
    if (data.letra === 'gigante') picks.push('Letra Gigante RV60 tapa dura.');
    if (data.precio === 'economica') picks.push('Biblia econ√≥mica tapa r√∫stica, ideal para llevar a grupos.');
    if (!picks.length) picks.push('Biblia RV60 chequera con zipper (compacta y bonita).');

    list.innerHTML = picks.map(p => `<li>${p}</li>`).join('');
    results.hidden = false;
  });

  document.getElementById('vida-reset')?.addEventListener('click', () => {
    form.reset();
    results.hidden = true;
    list.innerHTML = '';
  });
})();
</script>
</body>
</html>
